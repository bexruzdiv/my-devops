sudo useradd -M -r -s /bin/false pushgateway
cd /tmp
wget https://github.com/prometheus/pushgateway/releases/download/v1.5.1/pushgateway-1.5.1.linux-amd64.tar.gz
tar xvfz pushgateway-*.linux-amd64.tar.gz
sudo cp pushgateway-*.linux-amd64/pushgateway /usr/local/bin/
sudo chown pushgateway:pushgateway /usr/local/bin/pushgateway

sudo vim /etc/systemd/system/pushgateway.service

[Unit]
Description=Prometheus Pushgateway
Wants=network-online.target
After=network-online.target

[Service]
User=pushgateway
Group=pushgateway
Type=simple
ExecStart=/usr/local/bin/pushgateway

[Install]
WantedBy=multi-user.target


sudo systemctl daemon-reload 
sudo systemctl enable pushgateway
sudo systemctl start pushgateway
sudo systemctl status pushgateway

curl localhost:9091/metrics


sudo vim /etc/prometheus/prometheus.yml

- job_name: 'Pushgateway'
  honor_labels: true
  static_configs:
    - targets: ['TYPE_PUSH-GATEWAY_IP_HERE:9091']

sudo systemctl restart prometheus 
sudo systemctl status prometheus 